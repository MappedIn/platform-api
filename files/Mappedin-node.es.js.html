<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Mappedin-node.es.js - The Mappedin Web SDK</title>
    <meta name="description" content="An easy way to render beautiful 2D or 3D maps on your website, powered by Mappedin">
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/css/theme.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700' rel='stylesheet' type='text/css'>
    

      <style>
        body a {
          color: #ff5000;
        }
        body a:hover {
          color: #ff5000;
          opacity: 0.5;
        }
        .navbar.navbar-default .navbar-nav> li> a:focus, .navbar.navbar-default .navbar-nav> li> a:hover {
          color: #ff5000;
        }
        .navbar.navbar-default .navbar-nav> .active> a, .navbar.navbar-default .navbar-nav> .active> a:focus, .navbar.navbar-default .navbar-nav> .active> a:hover {
          color: #ff5000;
        }
        #docs-main .page-header {
          color: #ff5000;
        }
        #docs-main .page-section .nav-tabs {
          border-bottom: 1px solid #ff5000;
        }
        #docs-main .page-section .nav-tabs> li.active a {
          background: #ff5000;
          border: 1px solid #ff5000;
        }
        #sidebar li.panel .panel-body ol> li.active, #sidebar li.panel .panel-body ol> li:hover {
          background: #efefef;
        }
      </style>
</head>
<body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
              <img src="../assets/img/logo.png" alt="default">
            <span>The Mappedin Web SDK</span>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="nav">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/MappedIn/platform-api" class="fa fa-github github"></a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div id="main-wrapper" class="row">
        <div id="content-wrapper">
            <ol class="panel-group" id="sidebar" role="tablist" aria-multiselectable="true">
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-search-heading">
                        <h4 class="panel-title">
                      <a role="button" data-toggle="collapse" href="#sidebar-search" aria-expanded="true" aria-controls="collapseOne">
                        Search
                      </a>
                    </h4>
                    </div>
                    <div id="sidebar-search" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-search-heading">
                        <div class="panel-body">
                            <div id="api-tabview-filter">
                                <input type="search" id="api-filter" placeholder="Search...">
                            </div>
                        </div>
                    </div>
                </li>
                    <li class="panel panel-default">
                        <div class="panel-heading" role="tab" id="sidebar-version-heading">
                            <h4 class="panel-title">
                                  Version: 1.46.0
                                </a>
                            </h4>
                        </div>
                    </li>
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-modules-heading">
                        <h4 class="panel-title">
                    <a role="button" data-toggle="collapse" href="#sidebar-modules" aria-expanded="true" aria-controls="collapseOne">
                      Modules
                    </a>
                  </h4>
                    </div>
                    <div id="sidebar-modules" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-modules-heading">
                        <div class="panel-body">
                                <ol>
                                        <li>
                                            <a href="../modules/Mappedin.html">Mappedin</a>
                                        </li>
                                </ol>
                        </div>
                    </div>
                </li>
            
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-classes-heading">
                        <h4 class="panel-title">
                      <a role="button" data-toggle="collapse" href="#sidebar-classes" aria-expanded="true" aria-controls="collapseOne">
                        Classes
                      </a>
                    </h4>
                    </div>
                    <div id="sidebar-classes" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-classes-heading">
                        <div class="panel-body">
                            <ol>
                                    <li>
                                        <a href="../classes/Analytics.html">Analytics</a>
                                    </li>
                                    <li>
                                        <a href="../classes/CameraControls.html">CameraControls</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Easing.html">Easing</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Mappedin.html">Mappedin</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MappedinCategory.html">MappedinCategory</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MappedinDirections.html">MappedinDirections</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MappedinDirective.html">MappedinDirective</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MappedinEvent.html">MappedinEvent</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MappedinLocation.html">MappedinLocation</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MappedinLocationState.html">MappedinLocationState</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MappedinMap.html">MappedinMap</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MappedinMapGroup.html">MappedinMapGroup</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MappedinNode.html">MappedinNode</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MappedinPolygon.html">MappedinPolygon</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MappedinVenue.html">MappedinVenue</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MappedinVortex.html">MappedinVortex</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MapView.html">MapView</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MapView2D.html">MapView2D</a>
                                    </li>
                                    <li>
                                        <a href="../classes/MapView3D.html">MapView3D</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Marker.html">Marker</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Search.html">Search</a>
                                    </li>
                                    <li>
                                        <a href="../classes/TextLabel.html">TextLabel</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Tween.html">Tween</a>
                                    </li>
                            </ol>
                        </div>
                    </div>
                </li>
            </ol>
            <div class="content-container">
                <div class="apidocs">
                    <div id="docs-main">
                        <div class="content">
<div class="page-header">
    <h1><i class="fa fa-file-code-o" aria-hidden="true"></i>  File</h1>
</div>

<div class="file">
    <pre class="prettyprint linenums">
/* globals Promise */
import &#x27;isomorphic-fetch&#x27;;

/**
 * The base Mappedin module, that has references to all the other Mappedin objects you need.
 *
 * Start with Mappedin.initialize, which will get the data for a Venue from the Mappedin API, and set up a MapView, Search, and Analytics object for you.
 *
 * @module Mappedin
 * @main
 */
var Mappedin = {};

import getVenue from &#x27;./source/Mappedin.getVenue.js&#x27;;
import Search from &#x27;./source/Mappedin.Search.js&#x27;;
import Analytics from &#x27;./source/Mappedin.Analytics.js&#x27;;

Mappedin.Search = Search;
Mappedin.Analytics = Analytics;

/**
 * Contains the functions you need to start the MapView. Typically you will just use &#x60;Mappedin.initialize&#x60;, which does all this for you, but for special cases your flow should look like this:
  1. One of Mappedin.test3D (typcial), .forceTest, .force3D, or .force2D to put the MapView into either 2D or 3D mode.
  2. Mappedin.init to download all of the data you need from the Mappedin API
  3. new Mappedin.MapView, which will create the MapView and display the default map.

 * Each of those functions has a callback which you should use to trigger the next step. Once you get the final callback from the MapView
 * constructor, you can hide any loading screen UI and do whatever you want.
 *
 * @class Mappedin
 * @static
 */

/**
 * Once you are in 2D or 3D mode, call this function with the options you need for the Mappedin API, and a callback that will give you a Venue object populated with all your data.
 *
 * The things object parameter is where you specify what fields you want to download for each object in the Mappedin API.
 * This SDK will ensure it has the 2D or 3D files it needs, but it won&#x27;t download anything extra (like the names of locations) unless you specify it here.
 * This is a typical minimum, though you may have more location properties you are interested in. Talk to Mappedin for more information.
 *
 *	things: {
 *		venue: [&#x27;slug&#x27;, &#x27;name&#x27;],
 *		locations: [&#x27;name&#x27;, &#x27;type&#x27;, &#x27;description&#x27;, &#x27;icon&#x27;, &#x27;logo&#x27;],
 *		categories: [&#x27;name&#x27;],
 *		maps: [&#x27;name&#x27;, &#x27;elevation&#x27;, &#x27;shortName&#x27;]
 *	}
 *
 *
 * If you would like to force the test to run again, use the forceTest method instead. Or, if you want to force the user into a specific mode, use force2D or force3D respectively.
 * Note while 2D should work for basically anyone, if the user&#x27;s device/browser does not support WebGL and you call force3D, you will get an exception when you create a MapView object.
 *
 * @method getVenue
 * @param options {Object} Any options you need to specify to talk to the Mappedin API
 * @param options.clientId {String} The client key/ID provided to you by Mappedin to access our API. Contact your Mappedin representative if you do not have one
 * @param options.clientSecret {String} The secret/password that goes along with your ID
 * @param options.perspective {String} The name of the perspective you are using for 2D and 3D. Probably &quot;Website&quot;. This controls what 3D files or 2D tiles get downloaded, and different persepctives may have different map features enabled/disabled, or have different images.
 *	  @param [options.perspective.perspective2D] {String} Use if you have a different perspective to use in 2D mode
 *	  @param [options.perspective.perspective3D] {String} Use if you have a different perspective to use in 3D mode
 * @param options.venue {String} The &quot;slug&quot; that identifies the specific Venue you are interested in. Mappedin can tell you what it is. Developer accounts often start with &quot;api-demo1&quot;
 * @param options.things {Object} The things object is where you specify what fields you want to download for each object in the Mappedin API. Only specify what you will actually use, to minmimze transfer time. This SDK will ensure it has the 2D or 3D files it needs, and &#x60;id&#x60; is always included, but it won&#x27;t download anything extra (like the names of locations) unless you specify it here.
 *	  @param options.things.venue {[String]} The Venue information you want. &#x27;slug&#x27; and &#x27;name&#x27; are typical, but you may also want others. Speak to Mappedin to see what is available.
 *	  @param options.things.locations {[String]} The fields you will be using for any Locations. You probably want at least &#x27;name&#x27; and &#x27;type&#x27;. You will also probably want &#x27;description&#x27; and &#x27;logo&#x27;, but there can be any number of Location properties and it depends on your Venue and usecase. Talk to Mappedin for more details.
 *	  @param options.things.categories {[String]} The fields you will use for each Category. Typically &#x27;name&#x27; at a minimum, but other common fields are &#x27;description&#x27;, &#x27;picture&#x27;, &#x27;sortOrder&#x27; or &#x27;parents&#x27; (for hierarchical categories) as well.
 *	  @param options.things.maps {[String]} The fields on each Map you are interested in. You&#x27;ll probably want one or both of &#x27;name&#x27; or &#x27;shortName&#x27;, and &#x27;elevation&#x27; to sort.
 *	  @param [options.things.polygons] {[String]} The Polygon fields you want. The default is probably sufficient.
 *	  @param [options.things.nodes] {[String]} The Node fields you want. The default is probably sufficient.
 * @param mode {String} One of Mappedin.{{#crossLink &quot;Mappedin/modes:property&quot;}}{{/crossLink}}.
 * @param callback {Function} This function is called when the Venue data is loaded, or there is a problem.
 * @param callback.error {String} If there is an error, you will get it here. Typically this will only be useful for developers when building/testing. It&#x27;s not usually something a user can deal with.
 * @param callback.result {Mappedin} A Mappedin data object with all the data you asked for. It will have a venue property with a Venue object, and locations, categories, nodes, maps, and polygons arrays
 */
Mappedin.getVenue = function (options, callback) {
	options.things.venue = options.things.venue || [];
	getVenue(options, callback);
};
Mappedin.init = Mappedin.getVenue;

/**
* This function will take a single options object combining all options for Mappedin.init and the MapView constructor, and the div the MapView should live in.
* It returns a Promise that will resolve with the MapView once the 3D test has been performed, the right MapView was loaded, the data has been retrieved from the Mappedin API, and
* the MapView has been created. It could also fail (mostly if the options you set for the Mappedin API are incorrect).
*
* This is a convenience function that lets you avoid chaining a bunch of callbacks, calling test3D/force2D/force3D then Mappedin.init then the MapView constructor.
*
* @method initialize
* @param options {Object} Takes an object combining all options from Mappedin.init, the MapView constructor, and the Search constructor. If you explictly want to set the 3D mode rather than run the test, it also accepts a &#x60;mode&#x60; property that can be any of Mappedin.mode
	@param options.venue {Object} Any options from Mappedin.getVenue
	@param options.mapview {Object} Any options from the Mappedin.MapView constructor
	@param options.search {Object} Any options from the Mappedin.Seach constructor.
	@param options.firstMapSelector {Function} If you would like to pick the first map loaded, set this function. It gives you a Venue object, and expects a Mappedin Map or Map Id to be returned. Return venue.defaultMap for the default behaviour. If you return an invalid map, an error will be logged to the console and an arbitrary map will be loaded.
* @param container {Div} The HTML element the Mapview will live in.
*/
Mappedin.initialize = function (options) {
	return new Promise(function (resolve, reject) {
		var analyticsOptions = options.analytics || {};
		analyticsOptions.key = options.venue.clientId;
		analyticsOptions.secret = options.venue.clientSecret;
		analyticsOptions.venue = options.venue.venue;
		var analytics = new Mappedin.Analytics(analyticsOptions);
		function handleInit(error, venue) {
			if (error) {
				reject(error);
			} else {
				var mappedinData = {
					venue: venue
				};

				if (options.search) {
					mappedinData.search = new Mappedin.Search({
						&quot;key&quot;: options.search.key,
						&quot;secret&quot;: options.search.secret,
						&quot;venue&quot;: venue.venue.slug
					});
				}

				mappedinData.analytics = analytics;
				resolve(mappedinData);
			}
		}

		Mappedin.getVenue(options.venue, handleInit);
	});
};

export default Mappedin;

    </pre>
</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../assets/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>
    <script src="../assets/vendor/jquery/jquery.min.js"></script>
    <script src="../assets/vendor/jquery-ui/jquery-ui.min.js"></script>
    <script src="../assets/vendor/bootstrap/js/bootstrap.js"></script>
    <script src="../assets/vendor/github-slugger/slugger.js"></script>
    <script src="../assets/js/yuidoc-bootstrap.js"></script>
</body>
</html>
